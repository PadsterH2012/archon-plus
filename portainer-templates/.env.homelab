# Archon Homelab Native Configuration
# This configuration uses your existing homelab infrastructure
# Update the IP addresses and credentials to match your setup

# =============================================================================
# HOMELAB INFRASTRUCTURE CONFIGURATION
# =============================================================================

# PostgreSQL Database (Primary Database)
POSTGRESQL_HOST=10.202.70.30
POSTGRESQL_PORT=5432
POSTGRESQL_DATABASE=archon
POSTGRESQL_USER=archon_user
POSTGRESQL_PASSWORD=your-secure-postgresql-password
POSTGRESQL_POOL_SIZE=20
POSTGRESQL_MAX_OVERFLOW=30

# ChromaDB (Vector Search)
CHROMADB_HOST=10.202.70.31
CHROMADB_PORT=8000
CHROMADB_COLLECTION_PREFIX=archon
CHROMADB_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2

# Redis (Real-time Notifications & Caching)
REDIS_HOST=10.202.70.32
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB_REALTIME=0
REDIS_DB_CACHE=1
REDIS_DB_SESSIONS=2
REDIS_DB_TASKS=3

# MongoDB (Optional Document Storage)
MONGODB_HOST=10.202.70.33
MONGODB_PORT=27017
MONGODB_DATABASE=archon_documents
MONGODB_USER=archon_user
MONGODB_PASSWORD=your-mongodb-password

# =============================================================================
# ARCHON SERVICE CONFIGURATION
# =============================================================================

# Database Provider
DATABASE_PROVIDER=homelab_native

# Service Ports
ARCHON_SERVER_PORT=8181
ARCHON_MCP_PORT=8051
ARCHON_AGENTS_PORT=8052
ARCHON_UI_PORT=3737

# Host Configuration
HOST=localhost
# HOST=your-domain.com  # Uncomment for production

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters-long-homelab-edition
JWT_EXPIRY=3600
SESSION_TIMEOUT=86400

# =============================================================================
# AI SERVICES CONFIGURATION
# =============================================================================

# OpenAI Configuration (Optional)
OPENAI_API_KEY=your-openai-api-key

# Embedding Provider
EMBEDDING_PROVIDER=openai
# EMBEDDING_PROVIDER=local  # Use local TEI server

# Local Embedding Server (if using local embeddings)
LOCAL_EMBEDDING_URL=http://your-tei-server:8080

# =============================================================================
# OPERATIONAL CONFIGURATION
# =============================================================================

# Service Discovery
SERVICE_DISCOVERY_MODE=homelab

# Logging
LOG_LEVEL=INFO
LOGFIRE_TOKEN=

# Performance Tuning
CRAWL_MAX_CONCURRENT=10
SEARCH_TIMEOUT=30
VECTOR_SEARCH_TIMEOUT=15

# =============================================================================
# MIGRATION CONFIGURATION
# =============================================================================

# Migration Settings (for Supabase to Homelab migration)
MIGRATION_MODE=false
MIGRATION_BATCH_SIZE=1000
MIGRATION_VALIDATE_DATA=true

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM

# =============================================================================
# DEVELOPMENT OVERRIDES
# =============================================================================

# Uncomment for development
# LOG_LEVEL=DEBUG
# POSTGRESQL_HOST=localhost
# CHROMADB_HOST=localhost
# REDIS_HOST=localhost
# MONGODB_HOST=localhost

# =============================================================================
# HOMELAB NETWORK CONFIGURATION
# =============================================================================

# Network Settings
NETWORK_TIMEOUT=30
CONNECTION_RETRY_ATTEMPTS=3
CONNECTION_RETRY_DELAY=5

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Optional Features
ENABLE_MONGODB_STORAGE=false
ENABLE_VECTOR_CACHING=true
ENABLE_REAL_TIME_NOTIFICATIONS=true
ENABLE_PERFORMANCE_MONITORING=true

# Advanced Features
ENABLE_DISTRIBUTED_SEARCH=false
ENABLE_AUTO_SCALING=false
ENABLE_METRICS_COLLECTION=true

# =============================================================================
# RESOURCE LIMITS
# =============================================================================

# Memory Limits (for Docker deployment)
ARCHON_SERVER_MEMORY_LIMIT=1G
ARCHON_SERVER_MEMORY_RESERVATION=512M
ARCHON_MCP_MEMORY_LIMIT=512M
ARCHON_MCP_MEMORY_RESERVATION=256M
ARCHON_AGENTS_MEMORY_LIMIT=1G
ARCHON_AGENTS_MEMORY_RESERVATION=512M
ARCHON_UI_MEMORY_LIMIT=512M
ARCHON_UI_MEMORY_RESERVATION=256M

# CPU Limits
ARCHON_SERVER_CPU_LIMIT=1
ARCHON_SERVER_CPU_RESERVATION=0.5
ARCHON_MCP_CPU_LIMIT=0.5
ARCHON_MCP_CPU_RESERVATION=0.25
ARCHON_AGENTS_CPU_LIMIT=1
ARCHON_AGENTS_CPU_RESERVATION=0.5
ARCHON_UI_CPU_LIMIT=0.5
ARCHON_UI_CPU_RESERVATION=0.25

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Metrics Configuration
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Tracing Configuration
TRACING_ENABLED=false
JAEGER_ENDPOINT=http://your-jaeger:14268/api/traces

# =============================================================================
# BACKUP & DISASTER RECOVERY
# =============================================================================

# Backup Destinations
BACKUP_POSTGRESQL_ENABLED=true
BACKUP_CHROMADB_ENABLED=true
BACKUP_REDIS_ENABLED=false  # Redis is cache, no backup needed

# Backup Storage
BACKUP_STORAGE_PATH=/mnt/backups/archon
BACKUP_COMPRESSION=gzip
BACKUP_ENCRYPTION=false

# =============================================================================
# HOMELAB SPECIFIC SETTINGS
# =============================================================================

# Homelab Integration
HOMELAB_MONITORING_ENABLED=true
HOMELAB_ALERTING_WEBHOOK=http://your-monitoring:9093/api/v1/alerts

# Local DNS/Service Discovery
LOCAL_DNS_ENABLED=false
LOCAL_DNS_DOMAIN=homelab.local

# =============================================================================
# NOTES FOR HOMELAB DEPLOYMENT
# =============================================================================

# 1. Update all IP addresses to match your homelab infrastructure
# 2. Ensure PostgreSQL has pgvector extension installed
# 3. Create 'archon' database and user in PostgreSQL
# 4. Configure ChromaDB collections before first run
# 5. Setup Redis databases (0-3) for different purposes
# 6. MongoDB is optional - only enable if you need document storage
# 7. Generate strong JWT secret for production
# 8. Configure firewall rules for service communication
# 9. Setup backup strategy for PostgreSQL and ChromaDB
# 10. Monitor resource usage and adjust limits as needed
